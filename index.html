
<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Final Evolution: Digi‑Dex</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#0b1020; --panel:#101735; --panel-2:#0d1330; --text:#e9ecf7; --muted:#9aa3c4;
      --brand:#59a6ff; --accent:#ffd166; --chip:#1e2a54; --ring:#1b2547; --ok:#31d0aa; --warn:#ff7a7a;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:16px/1.55 system-ui,Segoe UI,Roboto,Inter,Arial}
    a{color:var(--brand);text-decoration:none}
    a:hover{text-decoration:underline}
    /* NAVBAR */
    .nav{position:sticky; top:0; z-index:50; background:linear-gradient(180deg,#0b1020,rgba(11,16,32,.72)); border-bottom:1px solid var(--ring); backdrop-filter: blur(10px);}
    .nav-inner{max-width:1200px;margin:auto;padding:12px 18px;display:flex;align-items:center;gap:16px}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800;letter-spacing:.3px}
    .brand .logo{width:28px;height:28px;border-radius:7px;background:
      radial-gradient(120% 120% at 20% 20%, #5ac8ff 0%, #2441ff 38%, #0b1020 80%); box-shadow: 0 0 0 1px #2b3772 inset, 0 4px 16px rgba(36,65,255,.35);}
    .nav a.navlink{color:var(--text);text-decoration:none;opacity:.9}
    .nav a.navlink:hover{opacity:1;color:#cfe0ff}
    .spacer{flex:1}
    /* HERO */
    .hero{max-width:1200px;margin:20px auto 8px;padding:0 18px}
    .hero h1{margin:6px 0 6px;font-size:clamp(22px,4vw,36px)}
    .hero p{margin:0;color:var(--muted)}
    /* CONTROLS */
    .panel{max-width:1200px;margin:14px auto;padding:14px 18px}
    .controls{background:var(--panel); border:1px solid var(--ring); border-radius:16px; box-shadow:var(--shadow); display:flex;flex-wrap:wrap;gap:10px; padding:12px;}
    .controls input,.controls select{background:var(--panel-2); border:1px solid var(--ring); color:var(--text); padding:10px 12px;border-radius:12px; outline:none;}
    .controls input{flex:1 1 280px}
    .controls .hint{color:var(--muted);font-size:12px;margin-left:auto;display:flex;align-items:center}
    /* GRID */
    .grid{max-width:1200px;margin:0 auto 30px;padding:0 18px;display:grid;gap:14px; grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
    .card{background:var(--panel); border:1px solid var(--ring); border-radius:16px; overflow:hidden; box-shadow:var(--shadow); transition: transform .15s ease,border-color .2s;}
    .card:hover{transform:translateY(-3px); border-color:#2a3d86}
    .thumb{aspect-ratio:1/1; background:#0b132b; display:flex; align-items:center; justify-content:center}
    .thumb img{width:100%;height:100%;object-fit:contain;filter: drop-shadow(0 3px 12px rgba(0,0,0,.45))}
    .body{padding:12px}
    .body h3{margin:0 0 6px;font-size:16px}
    .meta{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
    .chip{background:var(--chip);color:#b9c6ff;padding:4px 8px;border-radius:999px;font-size:12px}
    .statline{display:flex;gap:12px;color:var(--muted);font-size:12px}
    .card-link{display:block;color:inherit;text-decoration:none}
    /* EMPTY & FOOTER */
    .empty{max-width:1200px;margin:10px auto 30px;padding:0 18px;color:var(--muted)}
    footer{border-top:1px solid var(--ring);color:var(--muted);text-align:center;padding:14px 18px}
    .disclaimer{font-size:12px;color:#8e96b5}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="nav">
    <div class="nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>Final Evolution: <span style="color:#cfe0ff">Digi‑Dex</span></span>
      </div>
      <div class="spacer"></div>
      <a class="navlink" href="./index.html">Home</a>
      <a class="navlink" href="./digimon.html">Digi‑Dex</a>
      <a class="navlink" href="./about.html">About</a>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <h1>Guide and Dex for Final Evolution: Digi by Digimon World Indonesia</h1>
    <p>Masih scratch, hehe, nanti aku kabarin kalau selesai. ttd: Joe :P</p>
  </header>

  <!-- CONTROLS -->
  <section class="panel">
    <div class="controls">
      <input id="q" type="search" placeholder="Cari nama / alias / stage…" />
      <select id="stage" aria-label="Filter stage">
        <option value="">Semua Stage</option>
        <option>Child</option>
        <option>Adult</option>
        <option>Perfect</option>
        <option>Ultimate</option>
        <option>Ultimate+</option>
      </select>
      <select id="sort" aria-label="Urutkan">
        <option value="name-asc">Nama (A–Z)</option>
        <option value="name-desc">Nama (Z–A)</option>
      </select>
      <div class="hint">⌘/Ctrl + F untuk search cepat</div>
    </div>
  </section>

  <!-- GRID -->
  <main id="grid" class="grid" aria-live="polite"></main>
  <p id="empty" class="empty" hidden>Hmmm… nggak ketemu. Coba ubah kata kunci atau filter ya, Joe~</p>

  <!-- FOOTER -->
  <footer>
    <div>© Final Evolution • Digi‑Dex • Built with ❤️ by Joe</div>
    <div class="disclaimer">Digimon adalah merek dagang milik pemegang hak terkait. Ini proyek penggemar non‑komersial.</div>
  </footer>

  <script>
  /* ====== KONFIGURASI DATA ====== */
  const JSON_URL = 'data/digimon_evolution_lines.json'; // gunakan file JSON evolusi

  /* ====== STATE & UTIL ====== */
  let DB = [];
  const $ = (id) => document.getElementById(id);

  function chip(label){
    return `<span class="chip">${label}</span>`;
  }
  function linkTo(id, label){
    return `<a class="card-link" href="./digimon.html#${encodeURIComponent(id)}" aria-label="Buka detail ${label}">`;
  }

  /* ====== LOAD ====== */
  async function loadData(){
    const res = await fetch(JSON_URL, { cache: 'no-store' });
    if(!res.ok) throw new Error(`Gagal memuat data: ${res.status}`);
    return await res.json(); // Struktur: id, displayName, aliases[], stage, evolvesFrom[], evolvesTo[]
  }

  /* ====== SORTERS ====== */
  function sorter(key){
    const m = {
      'name-asc': (a,b)=> a.displayName.localeCompare(b.displayName),
      'name-desc':(a,b)=> b.displayName.localeCompare(a.displayName)
    };
    return m[key] || m['name-asc'];
  }

  /* ====== RENDER LIST ====== */
  const grid = $('grid'), empty = $('empty');
  const q = $('q'), stageSel = $('stage'), sortSel = $('sort');

  function cardHTML(d){
    const aliasChip = (d.aliases && d.aliases.length) ? chip(d.aliases[0]) : '';
    return `
      ${linkTo(d.id, d.displayName)}
        <article class="card">
          <div class="thumb">
            <!-- Placeholder kotak-inisial -->
            <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0b132b;color:#8ea3ff;font-weight:700;">
              ${d.displayName.charAt(0)}
            </div>
          </div>
          <div class="body">
            <h3>${d.displayName}</h3>
            <div class="meta">
              ${chip(d.stage)} ${aliasChip}
            </div>
            <div class="statline">
              <span>ID: ${d.id}</span>
            </div>
          </div>
        </article>
      </a>
    `;
  }

  function applyFilters(data){
    const term = (q.value || '').trim().toLowerCase();
    const stage = stageSel.value;
    const sort = sorter(sortSel.value);

    return data.filter(d=>{
      const okStage = !stage || d.stage === stage;
      const hay = [d.displayName, d.id, d.stage, ...(d.aliases||[])].join(' | ').toLowerCase();
      const okTerm = !term || hay.includes(term);
      return okStage && okTerm;
    }).sort(sort);
  }

  function render(list){
    grid.innerHTML = list.map(cardHTML).join('');
    empty.hidden = list.length > 0;
  }

  /* ====== BOOTSTRAP ====== */
  (async function init(){
    try{
      DB = await loadData();
      render(applyFilters(DB));
      [q, stageSel, sortSel].forEach(el => el.addEventListener('input', ()=> render(applyFilters(DB))));
    }catch(e){
      console.error(e);
      grid.innerHTML = `<p style="color:#ff9aa2">Error: ${e.message}</p>`;
    }
  })();
  </script>
</body>
</html>
